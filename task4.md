## **СУБД PlanetScale** 
a)

PlanetScale основан на Vitess, технологии баз данных с открытым исходным кодом, внедренная для обслуживания трафика баз данных YouTube в 2010 году. 
Vitess — это решение для баз данных для развертывания, масштабирования и управления большими кластерами экземпляров баз данных с открытым исходным кодом. В настоящее время он поддерживает MySQL и Percona Server для MySQL. 
Он спроектирован так, чтобы работать как в общедоступной или частной облачной архитектуре, так и на выделенном оборудовании. Он сочетает в себе и расширяет многие важные функции SQL с масштабируемостью базы данных NoSQL. 
Vitess решает следующие проблемы:
  -Масштабирование базы данных SQL за счет возможности сегментирования ее при минимальном внесении изменений в приложение.
  -Миграция с «голого железа» или виртуальных машин в частное или общедоступное облако.
  -Развертывание и управление большим количеством экземпляров базы данных SQL.

Таким образом, Vitess крайне полезная технология, но ее сложно внедрить и поддерживать без большой команды. Один из создателей Vitess хотел сделать его доступным для всех, поэтому позже он стал соучредителем PlanetScale. 
Благодаря PlanetScale каждая база данных, которую создается, получает под капот Vitess, что позволяет разработчикам создавать масштабируемые и надежные приложения, основанные на MySQL, 
без необходимости беспокоиться о сложностях управления инфраструктурой базы данных.

Компания быстро привлекла внимание инвесторов благодаря своему потенциалу изменить способ, которым компании масштабируют свои базы данных. 
Серия раундов финансирования позволила PlanetScale расширить свои возможности и увеличить свою клиентскую базу.

Сегодня PlanetScale является одним из ведущих поставщиков облачных баз данных, специализирующихся на масштабируемых MySQL. Их технология Vitess широко используется в индустрии и признана за свою эффективность и надежность.
С момента запуска общедоступной версии в ноябре 2021 года PlanetScale быстро выросла как по функциям, так и по количеству клиентов.

b)
  1) [PlanetScale Console](https://planetscale.com/docs/concepts/web-console):
     Это веб-интерфейс, предоставляющий администраторам и разработчикам возможность управлять и мониторить базы данных.
     Здесь можно создавать и настраивать базы данных, просматривать статистику использования ресурсов, управлять доступом и т. д.

  2) [PlanetScale CLI](https://planetscale.com/docs/reference/planetscale-cli):
     Это инструмент командной строки, который предоставляет аналогичные возможности, как и веб-консоль, но через командную строку.
     Это удобно для автоматизации задач и интеграции с другими инструментами разработки.

  3) PlanetScale Connect:
     С помощью [PlanetScale Connect](https://planetscale.com/docs/integrations/airbyte) можно извлекать данные из своей базы данных PlanetScale и безопасно загружать их в другие места для анализа, преобразования и многого другого.
     Используется коннектор Airbyte в качестве конвейера между источником PlanetScale и выбранным пунктом назначения. 

  4) API:
     PlanetScale также предоставляет [API](https://api-docs.planetscale.com/reference/getting-started-with-planetscale-api) для автоматизации управления базами данных. API полезен для интеграции PlanetScale в другие инструменты разработчика для ускорения рабочих процессов разработки.
     Например, можно программно создавать и удалять ветки базы данных, открывать и объединять запросы на развертывание и многое другое.

c)

На движке MySQL 8.
Так же при подгрузке уже существующих БД PlanetScale поддерживает MySQL версий начиная с 5.7.
При этом в PlanetScale присутствует ряд ограничений для запросов, функций и синтаксиса MySQL. Они отражены в таблице ниже.
![](dbm_4_hw_screens/report1.png)

d)

Система взаимодействия с БД похожа на git: есть много веток, в каждой из которых может содержаться какая-то версия БД, если мы хотим применить эти изменения нужно создать deploy request, после чего внесенные изменения будут применены.
![](dbm_4_hw_screens/report2.png)
Таким образом запросы производятся в выбранной ветке.
#ADD CODE & EXAMPLES

e)

PlanetScale является Serverless СУБД, соответственно вся серверная архитектура обеспечивается компанией и разработчику не нужно самому ее организовывать: в данном случае это сервера Amazon Web Services и Google Cloud. БД общим размером до 10гб можно хранить бесплатно (однако все равно придется платить за операционные мощности кластера), больше - +1.5$ за гб.
![](dbm_4_hw_screens/report3.png)

f)

На каких языках написана СУБД несложно узнать из [репозитория](https://github.com/planetscale?language=go) проекта: как и vitess, лежащий в основе, написан на go, так и остальные модули planetscale.  

g)

#NOT COMPLETED!

h)

1) Маршрутизация и сегментирование. В PlanetScale данные горизонтально секционируются или сегментируются по нескольким экземплярам MySQL. Каждый сегмент содержит подмножество данных на основе ключа сегментирования. При получении запроса уровень маршрутизации определяет, какой сегмент или сегменты содержат соответствующие данные для этого запроса, на основе ключа сегментирования, указанного в запросе. Это гарантирует, что запрос будет направлен только к необходимым сегментам, сокращая ненужное перемещение данных.
2) Параллельное выполнение запроса. Как только уровень маршрутизации определит сегменты, участвующие в запросе, запрос может выполняться параллельно между этими сегментами. 
3) Координация запросов. Несмотря на то, что запросы выполняются параллельно в разных сегментах, по-прежнему существует необходимость координации для обеспечения правильности и согласованности результатов. Координатор запросов PlanetScale контролирует выполнение распределенных запросов, организует связь между сегментами, агрегирует промежуточные результаты и выполняет любую необходимую сортировку или объединение данных из разных сегментов.
4) Распределенные объединения и агрегаты. В тех случаях, когда запросы включают объединения или агрегаты, охватывающие несколько сегментов, механизм выполнения запросов PlanetScale разумно распределяет вычисления по сегментам. Это может включать в себя удаление предикатов для минимизации перемещения данных, выполнение частичной агрегации отдельных сегментов, а затем объединение результатов на уровне координатора.

i)

План выполнения состоит из операторов, каждый из которых выполняет определенную часть работы. Операторы объединяются в древовидную структуру, которая представляет собой общий план выполнения. План представляет каждого оператора как узел дерева. Каждый оператор принимает на вход ноль или более строк и выдает на выходе ноль или более строк. Это означает, что выходные данные одного оператора становятся входными данными для следующего оператора. Операторы, соединяющие две ветви дерева, объединяют входные данные двух входящих потоков и создают один выходной сигнал.

Оценка плана выполнения начинается с конечных узлов дерева. Листовые узлы получают данные из службы топологии, а в некоторых случаях также могут локально оценивать значения выражений. Каждый листовой узел не будет получать входные данные от других операторов и будет передавать любые узлы, которые они создают, в свои родительские узлы. Родительские узлы затем будут передавать узлы своим родительским узлам вплоть до корневого узла. Корневой узел выдает окончательные результаты запроса и доставляет их пользователю.

j)



k)
l)
m)
n)
o)
p)
q)
r)
s)
